<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>미학적 민감성 테스트(AReA)</title>
<style>
body{font-family:Inter,system-ui,Segoe UI,Roboto,'Helvetica Neue',Arial;margin:0;background:#f6f7fb;color:#0f172a;padding:20px;}
h1{font-size:20px;margin-bottom:20px;}
form div{margin-bottom:12px;}
label{font-weight:400;}
button{background:#334155;color:white;border:0;padding:8px 10px;border-radius:8px;cursor:pointer;margin-top:10px;}
#resultsArea{margin-top:20px;padding:10px;border:1px solid #eef2f7;border-radius:8px;background:#fbfcff;}
.resultRow{margin-bottom:6px;}
.resultRow strong{margin-right:6px;}
</style>
</head>
<body>

<h1>미학적 민감성 테스트(AReA)</h1>

<form id="surveyForm"></form>
<button id="submitSurvey" type="button">제출 및 점수보기</button>

<div id="resultsArea" style="display:none;">
  <div class="resultRow"><strong>총점:</strong><span id="totalScore">—</span></div>
  <div class="resultRow"><strong>미학적 민감도 평균:</strong><span id="meanScore">—</span></div>
  <div class="resultRow"><strong>미학적 가치판단(AA)영역:</strong><span id="aaScore">—</span></div>
  <div class="resultRow"><strong>미학적 경험(IAE)영역:</strong><span id="iaeScore">—</span></div>
  <div class="resultRow"><strong>창조적 행위(CB)영역:</strong><span id="cbScore">—</span></div>
</div>

<script>
const surveyForm = document.getElementById('surveyForm');
const resultsArea = document.getElementById('resultsArea');
const submitSurvey = document.getElementById('submitSurvey');

// 설문 항목 정의
const items = [
{id:1,text:'나는 박물관을 방문하거나 음악/무용 공연을 보러 간다.',subscale:'AA',reverse:false},
{id:2,text:'나는 예술 작품을 볼 때 아름다움을 알아차린다.',subscale:'AA',reverse:false},
{id:3,text:'나는 음악에 의해 감정적으로 크게 움직인다.',subscale:'IAE',reverse:false},
{id:4,text:'예술 작품을 볼 때, 나는 그 조화로움에 감탄한다.',subscale:'AA',reverse:false},
{id:5,text:'나는 조각, 회화, 드로잉, 영화 연출 또는 디자인 작업을 한다.',subscale:'CB',reverse:false},
{id:6,text:'나는 예술 작품을 볼 때 긍정적인 에너지나 활력을 느낀다.',subscale:'IAE',reverse:false},
{id:7,text:'나는 시나 소설을 쓴다.',subscale:'CB',reverse:false},
{id:8,text:'나는 예술 작품을 볼 때 심장이 빨리 뛰거나, 땀이 나거나, 어지럽거나, 그 밖의 신체적 반응을 경험한다.',subscale:'IAE',reverse:false},
{id:9,text:'나는 건축물의 시각적 디자인을 감상한다.',subscale:'CB',reverse:false},
{id:10,text:'나는 현재(또는 과거에) 미술, 창작 글쓰기, 또는 미학 관련 수업을 듣고 있다(또는 들은 적이 있다).',subscale:'AA',reverse:false},
{id:11,text:'나는 예술 작품을 볼 때 경외감, 두려움, 혹은 압도되는 감정을 느낀다.',subscale:'IAE',reverse:false},
{id:12,text:'나는 예술 작품을 감상할 때 우주/자연/존재/신성과 하나가 된 듯한 일체감이나 연결감을 느낀다.',subscale:'IAE',reverse:false},
{id:13,text:'나는 예술 작품을 볼 때 깊이 감동받는다.',subscale:'AA',reverse:false},
{id:14,text:'나는 예술 작품을 볼 때 기쁨, 평온함, 또는 그 밖의 긍정적 감정을 경험한다.',subscale:'IAE',reverse:false}
];

// 설문 렌더링
function renderSurvey(){
  const min=1,max=5;

  // 스케일 안내 맨 위
  const scaleInfo = document.createElement('div');
  scaleInfo.style.marginBottom = '12px';
  scaleInfo.style.fontWeight = 'bold';
  scaleInfo.textContent = '응답 스케일: 1 = 전혀 그렇지 않다 / 2 = 약간 그렇다 / 3 = 보통이다 / 4 = 그렇다 / 5 = 매우 그렇다';
  surveyForm.appendChild(scaleInfo);

  items.forEach((it,i)=>{
    const div = document.createElement('div');
    const label = document.createElement('label');
    label.textContent = (i+1)+'. '+it.text;
    label.style.display='block';
    
    const row = document.createElement('div'); 
    row.style.display='flex'; 
    row.style.gap='10px'; 
    row.style.marginTop='4px';
    
    for(let v=min; v<=max; v++){
      const r = document.createElement('label'); 
      r.style.display='inline-flex'; 
      r.style.alignItems='center'; 
      r.style.gap='4px';
      const inp = document.createElement('input'); 
      inp.type='radio'; 
      inp.name='q'+i; 
      inp.value=v; 
      inp.required=true;
      r.appendChild(inp); 
      r.appendChild(document.createTextNode(v)); // 숫자만 표시
      row.appendChild(r);
    }
    div.appendChild(label); 
    div.appendChild(row);
    surveyForm.appendChild(div);
  });
}

// 점수 해석
function scoreLabel(value){
  const labels = {
    1:'낮음',
    2:'보통 이하',
    3:'보통',
    4:'높음',
    5:'매우 높음'
  };
  return labels[Math.round(value)] || '—';
}

  // 점수 계산
function computeScores(resp){
  const min=1,max=5;
  const adjusted = resp.map((r,i)=>items[i].reverse ? (max+min)-r : r);

  const sum = adjusted.reduce((a,b)=>a+b,0);
  const mean = sum/adjusted.length;
  
  document.getElementById('totalScore').textContent = sum;
  document.getElementById('meanScore').textContent = mean.toFixed(2) + ' (' + scoreLabel(mean) + ')';

  const groups={AA:[],IAE:[],CB:[]};
  items.forEach((it,i)=>{ if(groups[it.subscale]) groups[it.subscale].push(adjusted[i]); });

  const aaMean = groups.AA.length ? (groups.AA.reduce((a,b)=>a+b,0)/groups.AA.length) : 0;
  const iaeMean = groups.IAE.length ? (groups.IAE.reduce((a,b)=>a+b,0)/groups.IAE.length) : 0;
  const cbMean = groups.CB.length ? (groups.CB.reduce((a,b)=>a+b,0)/groups.CB.length) : 0;

  document.getElementById('aaScore').textContent = groups.AA.length ? aaMean.toFixed(2)+' ('+scoreLabel(aaMean)+')' : '—';
  document.getElementById('iaeScore').textContent = groups.IAE.length ? iaeMean.toFixed(2)+' ('+scoreLabel(iaeMean)+')' : '—';
  document.getElementById('cbScore').textContent = groups.CB.length ? cbMean.toFixed(2)+' ('+scoreLabel(cbMean)+')' : '—';

  resultsArea.style.display='block';
}

// 제출 버튼
submitSurvey.addEventListener('click', ()=>{
  const formData = new FormData(surveyForm);
  const responses = [];
  let firstUnanswered = null;

  for(let i=0;i<items.length;i++){
    const val = formData.get('q'+i);
    if(!val){
      if(!firstUnanswered) firstUnanswered = document.getElementsByName('q'+i)[0].closest('div');
      continue;
    }
    responses.push(Number(val));
  }

  if(firstUnanswered){
    alert('모든 항목에 답해주세요.');
    firstUnanswered.scrollIntoView({behavior:'smooth', block:'center'});
    return;
  }

  computeScores(responses);
});

renderSurvey();
</script>

</body>
</html>
